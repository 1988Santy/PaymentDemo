pipeline {
   agent any
   tools {
        maven 'Maven'

    }
   stages {
        stage('Build') {
            steps {

               snDevOpsStep ()
               //snDevOpsStep (enabled:true)
               //snDevOpsStep (stepSysId:'b075606b1b671410f23cdb9cdc4bcb2e', ignoreErrors:true)
               // snDevOpsStep (ignoreErrors:true) /* working 1.18 */
               // snDevOpsStep (stepSysId:'b075606b1b671410f23cdb9cdc4bcb2e', ignoreErrors:true)
               sh 'mvn -B -DskipTests clean compile'
				sleep 10

            }
        }
        stage('Test') { 
            steps {
               snDevOpsStep ()

                sh 'mvn test'
                sleep 10
            }
            post {
           		always {
                 junit '**/target/surefire-reports/*.xml'
            	} 
            }

        }

	stage('Deploy') { 
	            steps {
	               snDevOpsStep ()
	               echo 'Deploying....'
                	sleep 3
	               snDevOpsChange()
	               //sh 'mvn clean install package'

	            }
	            
	        }
	        
	        stage('PublishArtifacts') { 
	            steps {
	               snDevOpsStep ()
	               echo 'Publishing Artifacts....'
                	sleep 3
	               snDevOpsArtifact(artifactsPayload:"""{"artifacts": [{"name": "sa-web-ui.jar","version":"${artifactVersion}","semanticVersion": "${artifactSemVersion}","repositoryName": "First_repo"}]}""")
	               

	            }
	            
	        }

	        stage('PublishPackage') { 
	            steps {
	               snDevOpsStep ()
	               echo 'Publishing Package....'
                	sleep 3
					snDevOpsPackage(name: "balu-package", artifactsPayload: """{"artifacts": [{"name": "sa-web-ui.jar","repositoryName": "First_repo","version":"1.92"}]}""")

	            }
	            
	        }
      
  }
}
